{% extends 'base.html' %}

{% block title %}Registro - Yoga Terapia{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}">
{% endblock %}

{% block content %}
<section class="auth-section">
    <div class="container" style="display: flex; justify-content: center; align-items: center;">
        <div class="auth-card">
            <h1 class="auth-title">Registro de Instructor</h1>
            <form method="POST" action="{{ url_for('auth.register') }}" class="auth-form" id="formulario_registro">
                <div class="form-group grupo_formulario">
                    <label for="nombre_completo">Nombre Completo</label>
                    <input type="text" id="nombre_completo" name="name" required minlength="2" maxlength="120">
                    <div class="error_formulario" id="error_nombre">El nombre debe tener al menos 2 caracteres.</div>
                </div>

                <div class="form-group grupo_formulario">
                    <label for="correo_electronico">Correo Electr√≥nico</label>
                    <input type="email" id="correo_electronico" name="email" required>
                    <div class="error_formulario" id="error_correo">Por favor ingresa un email v√°lido.</div>
                </div>

                <div class="form-group grupo_formulario">
                    <label for="nombre_usuario">Nombre de Usuario</label>
                    <input type="text" id="nombre_usuario" name="username" required minlength="3" maxlength="20"
                        pattern="[a-zA-Z0-9_]+">
                    <small>Solo letras, n√∫meros y guiones bajos. M√≠nimo 3 caracteres.</small>
                    <div class="error_formulario" id="error_usuario">El nombre de usuario debe tener 3-20 caracteres y
                        solo contener letras, n√∫meros y guiones bajos.</div>
                </div>

                <div class="form-group grupo_formulario">
                    <label for="contrasena">Contrase√±a</label>
                    <div class="contenedor_input_contrasena">
                        <input type="password" id="contrasena" name="password" class="campo_contrasena" required>
                        <button type="button" class="boton_mostrar_contrasena" id="alternar_contrasena">
                            üëÅÔ∏è
                        </button>
                    </div>

                    <!-- Medidor de fortaleza -->
                    <div class="medidor_fortaleza_contrasena">
                        <div class="barra_fortaleza_contrasena" id="barra_fortaleza"></div>
                    </div>
                    <div class="texto_fortaleza" id="texto_fortaleza">Ingresa tu contrase√±a</div>

                    <!-- Requisitos de contrase√±a -->
                    <div class="requisitos_contrasena">
                        <div class="requisito_contrasena invalido" id="req_longitud">
                            <span class="icono_requisito">‚úì</span>
                            Al menos 8 caracteres
                        </div>
                        <div class="requisito_contrasena invalido" id="req_mayuscula">
                            <span class="icono_requisito">‚úì</span>
                            Al menos una letra may√∫scula
                        </div>
                        <div class="requisito_contrasena invalido" id="req_minuscula">
                            <span class="icono_requisito">‚úì</span>
                            Al menos una letra min√∫scula
                        </div>
                        <div class="requisito_contrasena invalido" id="req_numero">
                            <span class="icono_requisito">‚úì</span>
                            Al menos un n√∫mero
                        </div>
                        <div class="requisito_contrasena invalido" id="req_especial">
                            <span class="icono_requisito">‚úì</span>
                            Al menos un car√°cter especial (@$!%*?&)
                        </div>
                    </div>
                    <div class="error_formulario" id="error_contrasena">La contrase√±a no cumple con los requisitos de
                        seguridad.</div>
                </div>

                <div class="form-group grupo_formulario">
                    <label for="confirmar_contrasena">Confirmar Contrase√±a</label>
                    <div class="contenedor_input_contrasena">
                        <input type="password" id="confirmar_contrasena" name="confirmPassword" class="campo_contrasena"
                            required>
                        <button type="button" class="boton_mostrar_contrasena" id="alternar_confirmacion">
                            üëÅÔ∏è
                        </button>
                    </div>
                    <div class="error_formulario" id="error_confirmacion">Las contrase√±as no coinciden.</div>
                </div>

                <button type="submit" class="btn-primary btn-full" id="boton_enviar">Registrarse</button>
                
                <!-- DEBUG INFO -->
                <div id="debug_info" style="margin-top: 10px; font-size: 12px; color: #666;">
                    <p>Estado del formulario: <span id="debug_status">Cargando...</span></p>
                </div>
            </form>
            <div class="auth-links">
                <p>¬øYa tienes una cuenta? <a href="{{ url_for('auth.login') }}">Iniciar Sesi√≥n</a></p>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}

<script src="{{ url_for('static', filename='js/auth.js') }}"></script>

{% endblock %}